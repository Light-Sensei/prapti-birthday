<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Surprise</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        #puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-gap: 5px;
            margin: 20px auto;
            width: 320px;
        }

        .puzzle-piece {
            width: 100px;
            height: 100px;
            background-size: 300px 300px;
            cursor: pointer;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        #mini-games {
            margin: 20px;
        }

        #reward {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Happy Birthday, [Her Name]!</h1>
    <div id="puzzle-container">
        <!-- Puzzle pieces will be dynamically generated here -->
    </div>
    <div id="mini-games">
        <!-- Mini-games will go here -->
    </div>
    <div id="reward">
        <p>Points: <span id="points">0</span></p>
        <button id="unlock-reward">Unlock Your Favorite Outfit!</button>
        <div id="reward-message"></div>
    </div>

    <script>
        // Block Puzzle Game
        const puzzleContainer = document.getElementById('puzzle-container');
        const imageUrl = 'path_to_her_photo.jpg'; // Replace with the path to her photo

        let pieces = [];
        let emptyPiece = {row: 2, col: 2}; // Initially, the empty piece is at the bottom-right
        let points = 0;

        function createPuzzle() {
            const rows = 3;
            const cols = 3;
            const pieceSize = 100; // size of each piece

            for (let row = 0; row < rows; row++) {
                for (let col = 0; col < cols; col++) {
                    if (row === 2 && col === 2) continue; // Skip the last piece as it's empty

                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece';
                    piece.style.backgroundImage = `url(${imageUrl})`;
                    piece.style.backgroundPosition = `-${col * pieceSize}px -${row * pieceSize}px`;
                    piece.style.backgroundSize = `${rows * pieceSize}px ${cols * pieceSize}px`;
                    piece.dataset.row = row;
                    piece.dataset.col = col;
                    piece.addEventListener('click', handlePieceClick);
                    pieces.push(piece);
                    puzzleContainer.appendChild(piece);
                }
            }

            // Append an empty piece as a placeholder
            const emptyPieceElement = document.createElement('div');
            emptyPieceElement.className = 'puzzle-piece';
            emptyPieceElement.style.backgroundColor = 'transparent';
            puzzleContainer.appendChild(emptyPieceElement);
        }

        function handlePieceClick(event) {
            const piece = event.target;
            const row = parseInt(piece.dataset.row);
            const col = parseInt(piece.dataset.col);

            // Check if the clicked piece is adjacent to the empty piece
            if ((Math.abs(row - emptyPiece.row) === 1 && col === emptyPiece.col) || 
                (Math.abs(col - emptyPiece.col) === 1 && row === emptyPiece.row)) {

                // Swap pieces
                const emptyPieceIndex = pieces.findIndex(p => p.dataset.row == emptyPiece.row && p.dataset.col == emptyPiece.col);
                const pieceIndex = pieces.findIndex(p => p.dataset.row == row && p.dataset.col == col);

                const temp = pieces[pieceIndex];
                pieces[pieceIndex] = pieces[emptyPieceIndex];
                pieces[emptyPieceIndex] = temp;

                pieces[emptyPieceIndex].dataset.row = row;
                pieces[emptyPieceIndex].dataset.col = col;
                pieces[pieceIndex].dataset.row = emptyPiece.row;
                pieces[pieceIndex].dataset.col = emptyPiece.col;

                // Update empty piece position
                emptyPiece = {row, col};

                // Update the DOM
                updatePuzzle();

                points += 10; // Example points increment
                document.getElementById('points').textContent = points;
            }
        }

        function updatePuzzle() {
            puzzleContainer.innerHTML = '';
            createPuzzle();
        }

        createPuzzle();

        // Mini-Games Example
        document.getElementById('mini-games').innerHTML = `
            <button onclick="playMiniGame()">Play Mini-Game</button>
        `;

        function playMiniGame() {
            // Simple example: Increment points
            points += 50;
            document.getElementById('points').textContent = points;
        }

        // Reward System
        document.getElementById('unlock-reward').addEventListener('click', () => {
            if (points >= 100) {
                document.getElementById('reward-message').textContent = 'Congratulations! You can get your favorite outfit!';
            } else {
                document.getElementById('reward-message').textContent = 'Earn more points to unlock your favorite outfit!';
            }
        });
    </script>
</body>
</html>
